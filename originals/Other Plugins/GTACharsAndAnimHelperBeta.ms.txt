"GTA Chars And Anim Helper" v0.91 Open Beta.
This is the MaxScript for Autodesk 3ds Max.

Description:
"GTA Chars And Anim Helper" gives you the ability to skip some boring moments of skinning and animation of the characters for GTA: Vice City and San Andreas.
SOME options potentially can be used for GTA 3/4/5 modding, or other games.

Installation:
Just place "GTACharsAndAnimHelperBeta.ms" into your "3dsmax/scripts" folder.

How to use:
Point to any button with the mouse cursor to see some extra info.

That's all, dudes.


*************************

Ok, here's the extended description for these buttons:


"Char Helper":

Every bone in GTA VC/SA bone hierarchy has some special properties(select the bone, click "RMB/Object Properties/User Defined" and look at them):

* BoneID:
A special ID number for in-game use. For example, 24th bone "holds" the gun(usually, it's a right hand's bone). Needs for IG(InGame, gameplay) models, doesn't matter for CS(CutScene) characters(but can be useful for opcode 0524).
* BoneIndex:
Just index from the Root bone(0) to the last bone in the hierarchy(look at scene hierarchy in Scene Explorer to understand, but only if it sorted by date). It's important to match the real index!
* FrameName:
Trash stuff that appears because of KAM's scripts. Actually, ALL of these parameters appears because of KAM's scripts, but this parameter is needless except for one little pointless renaming option called "Restore" in the "DFF IO" script.
* BoneType:
1 or 3 - bones that don't have children bones
0 or 2 - bones that have children bones
If there are a few children bones under the parent bone - all children bones must be 2 or 3, but the last one must be 0 or 1. If there's only one children bone - this children bone must be 0 or 1.

So, how this maxscript can help you with all of these?
Easy: you don't need to go to "RMB/Object Properties/User Defined" every time - just use "Set BoneID" field to set BoneID for each bone, then select any bone and use once "Calculate for all hierarchy" button to automatically calculate and set BoneType and BoneIndex parameters for all custom bone hierarchy!
Yep, you can create a completely new bone hierarchy from scratch(24 bones maximum for IG models and 64 - for CS) by using "Create bones" buttons, then set all these bones' parameters, then skin your character with this skeleton by using 3dsmax "Skin" modifier, export and use in game!


******

"Anim Helper":

Well, you have a character and you want to animate him. Maybe these buttons will help you to do that much easier:

1) "Select bones" section:
"All" will select all bones the hierarchy if you have selected any one of these.
"Except Root" - all except Root, obviously.
"Only Root" - you got it.
Don't ask me why, but these buttons will help you when the time comes.

2) "Skin Mesh Triggers" section:
Sometimes you need to freeze your character's model to not select it while you trying to select a bone.
Sometimes you need to see through your model.
So:
Select the model or any of its bones and press "Freeze" to freeze your character's model.
Then select any bone(because now you can't select the model without going to the ass of 3dsmax) and press "Freeze" again to unfreeze the model.
Same instructions for "Transparency" button.

3) "Create/Delete HI Solver" section:
HI Solver is a History Independent inverse kinematic solution. It two words, this stuff will help you to ease of animation of the character's arms, legs and eyes. Normally it's impossible to use it for GTA animations, but you can do it with these instruments:
"One bone" creates HI Solver for selected bone.
Select ONE bone/helper and push this button.
"Bone + Joint" creates HI Solver for selected bone and its parent joint.
Select ONE bone/helper(foot or hand, for example) and push this button.
"Eyes" creates HI Solver for selected eye pupils' bones.
Select ALL eye pupils' bones/helpers and push this button.
As you can see(SEE, hehe), you need to create eye pupils' bones and place them into eye pupils before animation. You can delete these bones after animation.

If you changed your mind and don't want to use HI Solver - use "Delete for all selected". It will delete selected HI Solvers or HI Solvers for selected bones.
Works only for HI Solvers that was created with this script!
Select all needed bones or/and HI solvers and push this button.

But if you have done your arm's/leg's/eyes' animation, you'll need
"Before Export: Bake HI anim" section:
"For all selected bones/solvers" button will create anim keys for all selected bones that use HI Solvers or for bones that use selected HI Solvers. HI Solver(s) will disappear, but all animation will be "baked" onto character's bones!
Works only for HI Solvers that was created with this script!
It will not bake any anim if you didn't make any anim with HI Solver!
Use this before animation export.
Select all needed bones or/and HI solvers and push this button.
"Detailed" checkbox - bakes more detailed animation by adding extra anim keys every few frames. Of course, you want to have detailed animation, so it turned on by default. Choose frame interval in the "Int" field(each 1.0 frame by default).

4) "Attach/Detach object" section:
Sometimes in cutscenes, you need to make your character to pick up some object. But you can't place this object into character's hand every frame, over and over again! And you can't attach this object in a classical way, because it will not save its animation.
So these buttons will help you:
"Attach to selected" attaches object to selected bone/helper/object.
Select ONE bone/helper/object and push this button.

If you changed your mind and don't want to use this attach - select "Detach". It detaches selected attached objects or attached objects for selected bones/helpers/objects.
Works only for objects that were attached by this script!
Select all needed bones/helpers/objects and push this button.

But if you have done your object's animation(or just created its first and last anim key), you'll need
"Before Export: Bake Attached" section:
"For all selected objects" creates anim keys for all selected attached objects or attached objects for selected bones/helpers/objects.
Works only for objects that were attached by this script!
It will not bake any anim if you didn't make any anim keys for your object!
Use this before animation export.
Select all needed bones/helpers/objects and push this button.
"Detailed" checkbox - bakes more detailed animation by adding extra anim keys every few frames. Of course, you want to have detailed animation, so it turned on by default. Choose frame interval in the "Int" field(each 1.0 frame by default).

5) "Change animation speed" section:
You have made cool animation, but realized that it will be even cooler if it will play a bit faster/slower?
Don't worry, just use "Increase..." button: it increases selected animation as many times as specified in right field.
If you want slow down the animation by 2 times, then choose "0,5" in that field.
Select all needed bones/helpers/objects, then select the needed anim keys interval or the first and the last keys of needed interval and push this button.
"Accuracy" checkbox: It will round-up the number of frames of the new animation range to the value that was chosen in the right field.
If you increased your animation that has 25,0 frames by 2,0 times then the new range will be 12,5.
But if THIS checkbox was checked and value "1,0" was chosen - the new range will be 13,0.

6) "Before Export: Delete anim keys" section:
You know this famous problem when some character in the game is "turning into a ball" for a split second or making a funny face when he's trying to play new animation.
It happens because of "position keys" in animation.
All bones except Root bone must have rotation(green on the track bar) keys only(for correct animation), so you need to delete position(red) keys for them.
So use "Del Pos keys(all except Root)" button before animation export.
Select all needed bones(except Root) and push this button.

Ok, bones can have rotation(green, all bones) and position(red, Root bone only) keys but it's also recommended to delete scale(blue) keys for them.
Actually, I don't know how scale keys can damage your animation, because it seems the game doesn't read them. But I made this option for future purposes and also because I can.
Use(or not use) "Del Scale keys(not important)" button before animation export.
Select all needed bones and push this button.


******

"Bone Hierarchy Conversion":

1) "Biped" stuff is not finished yet, but trust me: it will be cool. Converting Endorphin anims is just one example of using this.
I don't know when it comes out, so this is the reason why I publish this 0.9b version of the script now.
Before v.1.0 happens, you can take a look at Wesser's "GTA Animation XML IO". It will help you to convert anims between GTA bone hierarchy and Biped.

2) "Bones System settings" section:
Don't use it, if you don't know any advantages of proper bones system.
Based on "Helper Manager" script by Lorne Brooks.
This section may disappear in the next versions of the script because of uselessness("Biped" stuff will be much better).

WARNING! Replacing Bones Hierarchy to Bones System will lead to impossibility to export your character to the game later!
This replacing is needed for easily animation only, so SAVE or BACKUP YOUR CHARACTER BEFORE REPLACING HIS BONE HIERARCHY!

"Replace With Bones System" - duplicates a picked hierarchy with a new Bones System. If any skinned meshes are found, it will re-skin them to a matching hierarchy of point helpers that are constrained to the new bones. The skin helpers will be added to a new scene layer called #__SkinHelpers__# then frozen.
"X-Axis Aligned Bones" checkbox: The existing hierarchy is aligned so that joints point down the X-axis. This is the default alignment for a newly created Bones System.
"M" checkbox: Display a message when X-Axis Aligned Bones is turned off and Replace With Bones System is pressed.
"Create Display Bones" checkbox: Display bones will be created between the real bones. They will be added to a new scene layer called #__DisplayBones__# then frozen.
"Keep Original Hierarchy" checkbox: The original hierarchy will not be deleted after the new bones have been added.
"Skin Mesh "X-Ray" Mode" checkbox: Sets Skin Mesh transparency after bones replace will be done.
"Show bones as boxes" checkbox: Displays new bones as boxes(some versions of 3ds Max doesn't display new bones in wireframe mode, so check it if you have this problem).


******

"Info":

Yep, that's some info.

And now - that's all, dudes.


*************************

Made by Shagg_E, 2019.
http://newrockstar.do.am
https://youtube.com/user/NewrockstarGames

Some parts of the code of "Helper Manager" by Lorne Brooks have been used in this script.
Email: lbtools2k@gmail.com

Also, I want to credit these people:
Kam - for his incredible scripts,
Yelmi and Deniska - for all their animations researches,
The Hero - for "RW File Converter" and Mr. Jago - for "Moddable cutscene actors for Vice City", which helped me a lot to learn CS characters' structure,
Wesser - for his Endorphin research, which inspired me to work with Biped stuff,
and many other guys who made all this possible! 

This script is not copyrighted, please feel free to modify or distribute.